<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‹°ì–´ë³¼ëŸ¬ - ì¸ì²œ ì¤‘,ê³ ë“±í•™ìƒ ë†êµ¬ ë§¤ì¹­</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .title-logo {
            height: 50px;
            vertical-align: middle;
        }
        .section {
            margin-bottom: 30px;
        }
        h2 {
            margin-bottom: 15px;
            color: #444;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #f0f0f0;
        }
        .win {
            color: blue;
        }
        .loss {
            color: red;
        }
        .win-team {
            background-color: rgba(0, 0, 255, 0.1);
        }
        .loss-team {
            background-color: rgba(255, 0, 0, 0.1);
        }
        .recent {
            display: flex;
            justify-content: center;
            gap: 3px;
            flex-wrap: wrap;
        }
        .recent span {
            display: inline-block;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            border-radius: 50%;
            font-size: 12px;
        }
        .recent .win-mark {
            background-color: #c8e6c9;
        }
        .recent .loss-mark {
            background-color: #ffcdd2;
        }
        
        /* 1ë“± íŒ€ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        .top-team-message {
            background-color: #f8f9fa;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 5px solid #4CAF50;
            font-weight: bold;
            font-size: 16px;
            color: #333;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        /* ê°•ì¡° ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        .highlight-text {
            color: #FF0000;
            font-size: 120%;
            font-weight: bold;
        }
        
        /* í‹°ì–´ ê´€ë ¨ ìŠ¤íƒ€ì¼ */
        .tier {
            display: inline-block;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        .tier-bronze {
            background: linear-gradient(to bottom, #cd7f32, #a05a2c);
        }
        .tier-silver {
            background: linear-gradient(to bottom, #c0c0c0, #a8a8a8);
        }
        .tier-gold {
            background: linear-gradient(to bottom, #ffd700, #cca800);
        }
        .tier-platinum {
            background: linear-gradient(to bottom, #e5e4e2, #a9a9a9);
        }
        .tier-diamond {
            background: linear-gradient(to bottom, #b9f2ff, #56c1d7);
        }
        
        /* ì½”íŠ¸ í•„í„° ìŠ¤íƒ€ì¼ */
        .court-filter {
            margin-bottom: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .court-filter button {
            padding: 6px 12px;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .court-filter button:hover {
            background-color: #ddd;
        }
        
        .court-filter button.active {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        /* ë”ë³´ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .load-more-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            transition: 0.3s;
        }
        
        .load-more-btn:hover {
            background-color: #e0e0e0;
        }
        
        /* í•„í„° ì¢…ë¥˜ ì„ íƒ ìŠ¤íƒ€ì¼ */
        .filter-type {
            display: flex;
            margin-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .filter-type-btn {
            padding: 8px 15px;
            background-color: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }
        
        .filter-type-btn:hover {
            background-color: #f0f0f0;
        }
        
        .filter-type-btn.active {
            border-bottom: 3px solid #4CAF50;
            color: #4CAF50;
        }
        
        /* ì½”íŠ¸ í•„í„°ì™€ íŒ€ í•„í„° ê³µí†µ ìŠ¤íƒ€ì¼ */
        .filter-group {
            display: none;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .filter-group.active {
            display: flex;
        }
        
        .court-filter-btn, .team-filter-btn {
            padding: 6px 12px;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .court-filter-btn:hover, .team-filter-btn:hover {
            background-color: #ddd;
        }
        
        .court-filter-btn.active, .team-filter-btn.active {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ì„ ìœ„í•œ ë¯¸ë””ì–´ ì¿¼ë¦¬ */
        @media screen and (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 20px;
                flex-direction: column;
                gap: 10px;
            }
            
            .title-logo {
                height: 40px;
            }
            
            .court-filter {
                justify-content: center;
            }
            
            .court-filter button {
                padding: 4px 8px;
                font-size: 12px;
            }
            
            th, td {
                padding: 6px 4px;
                font-size: 14px;
            }
            
            .recent span {
                width: 16px;
                height: 16px;
                line-height: 16px;
                font-size: 10px;
            }
            
            .top-team-message {
                font-size: 14px;
                padding: 8px 10px;
            }
            
            .highlight-text {
                font-size: 110%;
            }
            
            /* í…Œì´ë¸” ìŠ¤í¬ë¡¤ ì²˜ë¦¬ */
            .table-container {
                width: 100%;
                overflow-x: auto;
            }
            
            .filter-type-btn {
                padding: 6px 10px;
                font-size: 14px;
            }
            
            .court-filter-btn, .team-filter-btn {
                padding: 4px 8px;
                font-size: 12px;
            }
        }
        
        @media screen and (max-width: 480px) {
            body {
                padding: 5px;
            }
            
            h1 {
                font-size: 18px;
            }
            
            .title-logo {
                height: 30px;
            }
            
            h2 {
                font-size: 16px;
            }
            
            .court-filter button {
                padding: 3px 6px;
                font-size: 11px;
            }
            
            th, td {
                padding: 4px 2px;
                font-size: 12px;
            }
            
            .recent span {
                width: 14px;
                height: 14px;
                line-height: 14px;
                font-size: 8px;
            }
            
            .top-team-message {
                font-size: 12px;
                padding: 6px 8px;
            }
            
            .highlight-text {
                font-size: 105%;
            }
            
            .filter-type-btn {
                padding: 5px 8px;
                font-size: 12px;
            }
            
            .court-filter-btn, .team-filter-btn {
                padding: 3px 6px;
                font-size: 11px;
            }
        }
        
        .small-tier {
            font-size: 10px;
            padding: 2px 4px;
            vertical-align: middle;
        }
        
        .team-rank {
            display: inline-block;
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 12px;
            margin-right: 6px;
            font-size: 14px;
        }
        
        /* íŒ€ ì •ë³´ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .team-info-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        
        .team-info-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .team-info-stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .team-stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .team-stat-value {
            font-size: 18px;
            font-weight: bold;
        }
        
        .team-stat-label {
            font-size: 12px;
            color: #666;
        }
        
        /* í•™ìƒ êµ¬ë¶„ í•„í„° ìŠ¤íƒ€ì¼ */
        .student-filter {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .student-filter-btn {
            padding: 8px 16px;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            font-weight: bold;
        }
        
        .student-filter-btn:hover {
            background-color: #ddd;
        }
        
        .student-filter-btn.active {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        /* ìš°ì¸¡ ìƒë‹¨ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .register-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .register-btn:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        @media screen and (max-width: 768px) {
            .register-btn {
                top: 10px;
                right: 10px;
                padding: 8px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- ì„ ìˆ˜í’€ ë“±ë¡ ë²„íŠ¼ -->
    <button class="register-btn" onclick="window.open('https://forms.gle/f11xkihmv35Gy6rA8', '_blank')">
        ì„ ìˆ˜í’€ ë“±ë¡í•˜ê¸°
    </button>
    
    <div class="container">
        <h1>
            <img src="tierballer_logo.png" alt="í‹°ì–´ë³¼ëŸ¬ ë¡œê³ " class="title-logo">
            í‹°ì–´ë³¼ëŸ¬ - ì¸ì²œ ì¤‘,ê³ ë“±í•™ìƒ ë†êµ¬ ë§¤ì¹­
        </h1>

        <!-- ì„ ìˆ˜ ê¸°ë¡ ì„¹ì…˜ -->
        <div class="section">
            <h2>ì„ ìˆ˜ ê¸°ë¡</h2>
            
            <!-- í•™ìƒ êµ¬ë¶„ í•„í„° -->
            <div class="student-filter">
                <button class="student-filter-btn active" data-type="all">ì „ì²´</button>
                <button class="student-filter-btn" data-type="middle">ì¤‘í•™ìƒ</button>
                <button class="student-filter-btn" data-type="high">ê³ ë“±í•™ìƒ</button>
            </div>
            
            <div class="table-container">
                <table id="player-stats">
                    <thead>
                        <tr>
                            <th>ìˆœìœ„</th>
                            <th>ì„ ìˆ˜ëª…</th>
                            <th>í•™êµ</th>
                            <th>ì†Œì†íŒ€</th>
                            <th>ê²½ê¸°ìˆ˜</th>
                            <th>ìŠ¹</th>
                            <th>íŒ¨</th>
                            <th>ìµœê·¼ì „ì </th>
                            <th>ì†Œì†íŒ€ í‹°ì–´</th>
                        </tr>
                    </thead>
                    <tbody id="player-stats-body">
                        <!-- ë°ì´í„°ëŠ” JavaScriptë¡œ ê¸°ì…ë¨ -->
                    </tbody>
                </table>
            </div>
            <button id="load-more-players" class="load-more-btn">ë”ë³´ê¸°</button>
        </div>

        <!-- ì½”íŠ¸ë³„ ìŠ¹íŒ¨ í˜„í™© ì„¹ì…˜ -->
        <div class="section">
            <h2>ìŠ¹íŒ¨ í˜„í™©</h2>
            
            <!-- í•„í„° ì¢…ë¥˜ ì„ íƒ -->
            <div class="filter-type">
                <button class="filter-type-btn active" data-filter="court">ì½”íŠ¸ë³„ í•„í„°</button>
                <button class="filter-type-btn" data-filter="team">íŒ€ë³„ í•„í„°</button>
            </div>
            
            <!-- ì½”íŠ¸ í•„í„° -->
            <div class="court-filter filter-group active">
                <button class="court-filter-btn active" data-court="ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€">ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€</button>
                <button class="court-filter-btn" data-court="ìœ¨ëª©ê³µì›">ìœ¨ëª©ê³µì›</button>
                <button class="court-filter-btn" data-court="ê·¼ë¦°ê³µì›">ê·¼ë¦°ê³µì›</button>
                <button class="court-filter-btn" data-court="ì†¡ë„ì¤‘ê³ ">ì†¡ë„ì¤‘ê³ </button>
                <button class="court-filter-btn" data-court="ê´‘ì„±ì¤‘ê³ ">ê´‘ì„±ì¤‘ê³ </button>
                <button class="court-filter-btn" data-court="ë™ì‚°ì¤‘ê³ ">ë™ì‚°ì¤‘ê³ </button>
                <button class="court-filter-btn" data-court="ì¬ëŠ¥ì¤‘ê³ ">ì¬ëŠ¥ì¤‘ê³ </button>
                <button class="court-filter-btn" data-court="í™”ë„ì§„ì¤‘">í™”ë„ì§„ì¤‘</button>
            </div>
            
            <!-- íŒ€ í•„í„° -->
            <div class="team-filter filter-group">
                <!-- íŒ€ ë²„íŠ¼ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë™ì  ì¶”ê°€ë¨ -->
            </div>
            
            <!-- 1ë“± íŒ€ ì•ˆë‚´ ë¬¸êµ¬ -->
            <div id="top-team-message" class="top-team-message">
                <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë‚´ìš© ì—…ë°ì´íŠ¸ -->
            </div>
            
            <div class="table-container">
                <table id="court-matches">
                    <thead>
                        <tr>
                            <th>ë‚ ì§œ</th>
                            <th>ê²½ê¸° ì½”íŠ¸</th>
                            <th>AíŒ€</th>
                            <th>ì ìˆ˜</th>
                            <th>BíŒ€</th>
                        </tr>
                    </thead>
                    <tbody id="court-matches-body">
                        <!-- ë°ì´í„°ëŠ” JavaScriptë¡œ ê¸°ì…ë¨ -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ì„ ìˆ˜ ë°ì´í„° - ë‚˜ì¤‘ì— ì´ ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´ ëª¨ë“  ì •ë³´ê°€ ìë™ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤
        const players = [
            {
                id: 1001,
                name: "ê³½ë„í˜„",
                school: "ê´‘ì„±ì¤‘",
                teams: ["ê´‘ì„±", "ê´‘ì„±2"]
            },
            {
                id: 1002,
                name: "ë…¸í˜„í˜¸",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›"]
            },
            {
                id: 1003,
                name: "ì¡°í•œì„ ",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›", "SDì•¨ë¦¬ì›2"]
            },
            {
                id: 1004,
                name: "ê¹€ë‹¤ìš¸",
                school: "ê´‘ì„±ì¤‘",
                teams: ["ê´‘ì„±"]
            },
            {
                id: 1005,
                name: "í˜„ì°¬ìœ¨",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›"]
            },
            {
                id: 1006,
                name: "ì„œê²½í˜„",
                school: "ê´‘ì„±ì¤‘",
                teams: ["ê´‘ì„±"]
            },
            {
                id: 1007,
                name: "ì„í¬ë™",
                school: "ê´‘ì„±ì¤‘",
                teams: ["ê´‘ì„±", "ê´‘ì„±2"]
            },
            {
                id: 1008,
                name: "ì •ì˜ˆì¤€",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›"]
            },
            {
                id: 1009,
                name: "í•œì¬ìœ¤",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›2"]
            },
            {
                id: 1010,
                name: "ìµœì—°í˜¸",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›2"]
            },
            {
                id: 1011,
                name: "?í¬í˜„",
                school: "ì†¡ë„ì¤‘",
                teams: ["SDì•¨ë¦¬ì›2"]
            },
            {
                id: 1012,
                name: "???1",
                school: "ê´‘ì„±ì¤‘",
                teams: ["ê´‘ì„±2"]
            },
            {
                id: 1013,
                name: "???2",
                school: "ê´‘ì„±ì¤‘",
                teams: ["ê´‘ì„±2"]
            },
        ];

        // íŒ€ ë°ì´í„° - ê° íŒ€ì˜ í‹°ì–´ ì •ë³´
        const teams = [
            {
                name: "SDì•¨ë¦¬ì›",
                tier: "silver" // bronze, silver, gold, platinum, diamond
            },
            {
                name: "SDì•¨ë¦¬ì›2",
                tier: "silver"
            },
            {
                name: "ê´‘ì„±",
                tier: "bronze"
            },
            {
                name: "ê´‘ì„±2",
                tier: "bronze"
            }
        ];

        // ê²½ê¸° ê²°ê³¼ ë°ì´í„° - ì´ ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´ ëª¨ë“  ì •ë³´ê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤
        const matchResults = [
            {
                id: "M001",
                date: "2025-04-23",
                court: "ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€",
                teamA: "SDì•¨ë¦¬ì›",
                teamAPlayers: [1002,1003,1005,1008],
                teamB: "ê´‘ì„±",
                teamBPlayers: [1001,1004,1006,1007],
                scoreA: 7,
                scoreB: 2
            },
            {
                id: "M002",
                date: "2023-04-30",
                court: "ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€",
                teamA: "SDì•¨ë¦¬ì›2",
                teamAPlayers: [1003,1009,1010,1011],
                teamB: "ê´‘ì„±2",
                teamBPlayers: [1001,1012,1007,1013],
                scoreA: 50,
                scoreB: 8
            }
        ];
        
        // ê³„ì‚°ëœ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜ë“¤
        let playerStats = [];      // ì„ ìˆ˜ë³„ í†µê³„ ë°ì´í„°
        let teamRankings = [];     // íŒ€ë³„ ìˆœìœ„ ë° í†µê³„
        let formattedMatches = []; // í‘œì‹œìš© ê²½ê¸° ê²°ê³¼
        let playerDisplayCount = 10; // ì´ˆê¸°ì— í‘œì‹œí•  ì„ ìˆ˜ ìˆ˜

        // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
        function validateData() {
            let errors = [];
            
            // 1. ëª¨ë“  ì„ ìˆ˜ IDê°€ ìœ íš¨í•œì§€ í™•ì¸
            matchResults.forEach((match, idx) => {
                [...match.teamAPlayers, ...match.teamBPlayers].forEach(playerId => {
                    const player = players.find(p => p.id === playerId);
                    if (!player) {
                        errors.push(`ê²½ê¸° ${match.id}: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì„ ìˆ˜ ID ${playerId}`);
                    }
                });
            });
            
            // 2. ì„ ìˆ˜ê°€ í•´ë‹¹ íŒ€ì— ì†Œì†ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            matchResults.forEach((match, idx) => {
                // AíŒ€ ì„ ìˆ˜ í™•ì¸
                match.teamAPlayers.forEach(playerId => {
                    const player = players.find(p => p.id === playerId);
                    if (player && !player.teams.includes(match.teamA)) {
                        errors.push(`ê²½ê¸° ${match.id}: ì„ ìˆ˜ ${player.name}(${playerId})ëŠ” íŒ€ ${match.teamA}ì˜ ì†Œì†ì´ ì•„ë‹™ë‹ˆë‹¤`);
                    }
                });
                
                // BíŒ€ ì„ ìˆ˜ í™•ì¸
                match.teamBPlayers.forEach(playerId => {
                    const player = players.find(p => p.id === playerId);
                    if (player && !player.teams.includes(match.teamB)) {
                        errors.push(`ê²½ê¸° ${match.id}: ì„ ìˆ˜ ${player.name}(${playerId})ëŠ” íŒ€ ${match.teamB}ì˜ ì†Œì†ì´ ì•„ë‹™ë‹ˆë‹¤`);
                    }
                });
            });
            
            // 3. ëª¨ë“  íŒ€ì´ teams ë°°ì—´ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
            const allTeams = new Set(teams.map(t => t.name));
            matchResults.forEach(match => {
                if (!allTeams.has(match.teamA)) {
                    errors.push(`ê²½ê¸° ${match.id}: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒ€ ${match.teamA}`);
                }
                if (!allTeams.has(match.teamB)) {
                    errors.push(`ê²½ê¸° ${match.id}: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒ€ ${match.teamB}`);
                }
            });
            
            // 4. ë‚ ì§œ í˜•ì‹ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
            matchResults.forEach(match => {
                if (!/^\d{4}-\d{2}-\d{2}$/.test(match.date)) {
                    errors.push(`ê²½ê¸° ${match.id}: ì˜ëª»ëœ ë‚ ì§œ í˜•ì‹ ${match.date}`);
                }
            });
            
            // ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ì½˜ì†”ì— ì¶œë ¥í•˜ê³  ê²½ê³ 
            if (errors.length > 0) {
                console.error('ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ì˜¤ë¥˜:');
                errors.forEach(error => console.error(error));
                alert('ë°ì´í„°ì— ì˜¤ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤. ê°œë°œì ë„êµ¬ì˜ ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
            
            return errors.length === 0;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° í‘œì‹œ
        window.onload = function() {
            // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ì‹¤í–‰
            if (!validateData()) {
                return; // ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ì²˜ë¦¬ ì¤‘ë‹¨
            }
            
            // ë°ì´í„° ê³„ì‚° ë° ë™ê¸°í™” ì²˜ë¦¬
            processData();
            
            // ì„ ìˆ˜ ê¸°ë¡ ì—…ë°ì´íŠ¸
            updatePlayerStats();
            // íŒ€ í•„í„° ë²„íŠ¼ ìƒì„±
            generateTeamFilterButtons();
            // ê¸°ë³¸ í•„í„° ì„¤ì • (ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€ìœ¼ë¡œ ì´ˆê¸°í™”)
            filterMatchesByCourt('ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€');
            updateTopTeamMessage('ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€');
            
            // í•™ìƒ êµ¬ë¶„ í•„í„° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('.student-filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    
                    // í™œì„±í™”ëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
                    document.querySelectorAll('.student-filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // ì„ ìˆ˜ ê¸°ë¡ í•„í„°ë§
                    filterPlayerStats(type);
                });
            });
            
            // í•„í„° ì¢…ë¥˜ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('.filter-type-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const filterType = this.getAttribute('data-filter');
                    
                    // í•„í„° ì¢…ë¥˜ ë²„íŠ¼ í™œì„±í™”
                    document.querySelectorAll('.filter-type-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // í•´ë‹¹ í•„í„° ê·¸ë£¹ í‘œì‹œ
                    document.querySelectorAll('.filter-group').forEach(group => {
                        group.classList.remove('active');
                    });
                    document.querySelector(`.${filterType}-filter`).classList.add('active');
                    
                    // í•„í„° ì´ˆê¸°í™”
                    if (filterType === 'court') {
                        // ê¸°ë³¸ì ìœ¼ë¡œ ì²« ë²ˆì§¸ ì½”íŠ¸ ì„ íƒ
                        const firstCourtBtn = document.querySelector('.court-filter-btn');
                        if (firstCourtBtn) {
                            firstCourtBtn.click();
                        }
                    } else if (filterType === 'team') {
                        // ê¸°ë³¸ì ìœ¼ë¡œ ì²« ë²ˆì§¸ íŒ€ ì„ íƒ
                        const firstTeamBtn = document.querySelector('.team-filter-btn');
                        if (firstTeamBtn) {
                            firstTeamBtn.click();
                        }
                    }
                });
            });
            
            // ì½”íŠ¸ í•„í„° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            document.querySelectorAll('.court-filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const court = this.getAttribute('data-court');
                    filterMatchesByCourt(court);
                    updateTopTeamMessage(court);
                    
                    // í™œì„±í™”ëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
                    document.querySelectorAll('.court-filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            // ë”ë³´ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('load-more-players').addEventListener('click', function() {
                playerDisplayCount += 10; // 10ëª…ì”© ì¶”ê°€
                updatePlayerStats();
                
                // ëª¨ë“  ì„ ìˆ˜ë¥¼ í‘œì‹œí•œ ê²½ìš° ë²„íŠ¼ ìˆ¨ê¸°ê¸°
                if (playerDisplayCount >= playerStats.length) {
                    this.style.display = 'none';
                }
            });
        };
        
        // ë°ì´í„° ì²˜ë¦¬ ë° ê³„ì‚° - ëª¨ë“  í†µê³„ë¥¼ ì¬ê³„ì‚°í•˜ê³  ë™ê¸°í™”
        function processData() {
            // 1. ì„ ìˆ˜ë³„ í†µê³„ ì´ˆê¸°í™”
            playerStats = players.map(player => {
                return {
                    ...player,
                    games: 0,
                    wins: 0,
                    losses: 0,
                    recent: [], // ìµœê·¼ 5ê²½ê¸° ê²°ê³¼
                    highestTier: getPlayerHighestTier(player) // ì†Œì†ëœ íŒ€ ì¤‘ ê°€ì¥ ë†’ì€ í‹°ì–´
                };
            });
            
            // 2. íŒ€ë³„ ë°ì´í„° êµ¬ì¡° ì´ˆê¸°í™”
            const teamData = {};
            teams.forEach(team => {
                teamData[team.name] = {
                    name: team.name,
                    games: 0,
                    wins: 0,
                    losses: 0,
                    players: [],
                    tier: team.tier
                };
            });
            
            // ê° ì„ ìˆ˜ë¥¼ í•´ë‹¹ íŒ€ì— ì—°ê²°
            players.forEach(player => {
                player.teams.forEach(teamName => {
                    if (teamData[teamName]) {
                        teamData[teamName].players.push(player.id);
                    }
                });
            });
            
            // 3. ê²½ê¸° ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„ ìˆ˜ ë° íŒ€ í†µê³„ ê³„ì‚°
            // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹  ê²½ê¸°ê°€ ì•ì— ì˜¤ë„ë¡)
            const sortedMatches = [...matchResults].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // ëª¨ë“  ê²½ê¸° ê²°ê³¼ì— ëŒ€í•´ ì²˜ë¦¬
            sortedMatches.forEach(match => {
                const isTeamAWin = match.scoreA > match.scoreB;
                
                // AíŒ€ ê´€ë ¨ ì—…ë°ì´íŠ¸
                if (teamData[match.teamA]) {
                    teamData[match.teamA].games++;
                    if (isTeamAWin) {
                        teamData[match.teamA].wins++;
                    } else {
                        teamData[match.teamA].losses++;
                    }
                }
                
                // BíŒ€ ê´€ë ¨ ì—…ë°ì´íŠ¸
                if (teamData[match.teamB]) {
                    teamData[match.teamB].games++;
                    if (!isTeamAWin) {
                        teamData[match.teamB].wins++;
                    } else {
                        teamData[match.teamB].losses++;
                    }
                }
                
                // AíŒ€ ì„ ìˆ˜ í†µê³„ ì—…ë°ì´íŠ¸
                match.teamAPlayers.forEach(playerId => {
                    const playerIndex = playerStats.findIndex(p => p.id === playerId);
                    if (playerIndex !== -1) {
                        playerStats[playerIndex].games++;
                        if (isTeamAWin) {
                            playerStats[playerIndex].wins++;
                            playerStats[playerIndex].recent.unshift("ìŠ¹"); // ìµœì‹  ê²°ê³¼ë¥¼ ì•ì— ì¶”ê°€
                        } else {
                            playerStats[playerIndex].losses++;
                            playerStats[playerIndex].recent.unshift("íŒ¨");
                        }
                    }
                });
                
                // BíŒ€ ì„ ìˆ˜ í†µê³„ ì—…ë°ì´íŠ¸
                match.teamBPlayers.forEach(playerId => {
                    const playerIndex = playerStats.findIndex(p => p.id === playerId);
                    if (playerIndex !== -1) {
                        playerStats[playerIndex].games++;
                        if (!isTeamAWin) {
                            playerStats[playerIndex].wins++;
                            playerStats[playerIndex].recent.unshift("ìŠ¹");
                        } else {
                            playerStats[playerIndex].losses++;
                            playerStats[playerIndex].recent.unshift("íŒ¨");
                        }
                    }
                });
            });
            
            // ê° ì„ ìˆ˜ì˜ ìµœê·¼ ì „ì ì„ ìµœëŒ€ 5ê°œë¡œ ì œí•œ
            playerStats.forEach(player => {
                player.recent = player.recent.slice(0, 5);
            });
            
            // 4. íŒ€ ìˆœìœ„ ê³„ì‚° (ìŠ¹ë¥  ê¸°ì¤€)
            teamRankings = Object.values(teamData).sort((a, b) => {
                const winRateA = a.wins / a.games || 0;
                const winRateB = b.wins / b.games || 0;
                
                if (winRateB === winRateA) {
                    return b.games - a.games;
                }
                return winRateB - winRateA;
            });
            
            // ìˆœìœ„ ì •ë³´ ì¶”ê°€
            teamRankings.forEach((team, index) => {
                team.rank = index + 1;
            });
            
            // 5. í‘œì‹œìš© ê²½ê¸° ê²°ê³¼ í˜•ì‹í™”
            formattedMatches = sortedMatches.map(match => {
                // AíŒ€ ì„ ìˆ˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
                const teamAPlayerNames = match.teamAPlayers.map(id => {
                    const player = players.find(p => p.id === id);
                    return player ? player.name : 'Unknown';
                }).join(', ');
                
                // BíŒ€ ì„ ìˆ˜ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
                const teamBPlayerNames = match.teamBPlayers.map(id => {
                    const player = players.find(p => p.id === id);
                    return player ? player.name : 'Unknown';
                }).join(', ');
                
                return {
                    id: match.id,
                    date: match.date,
                    court: match.court,
                    teamA: `${match.teamA} (${teamAPlayerNames})`,
                    teamB: `${match.teamB} (${teamBPlayerNames})`,
                    scoreA: match.scoreA,
                    scoreB: match.scoreB,
                    originalTeamA: match.teamA,
                    originalTeamB: match.teamB
                };
            });
        }
        
        // ì„ ìˆ˜ê°€ ì†Œì†ëœ íŒ€ ì¤‘ ê°€ì¥ ë†’ì€ í‹°ì–´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
        function getPlayerHighestTier(player) {
            const tierRank = {
                'bronze': 1,
                'silver': 2,
                'gold': 3,
                'platinum': 4,
                'diamond': 5
            };
            
            let highestTier = 'bronze'; // ê¸°ë³¸ê°’
            
            player.teams.forEach(teamName => {
                const team = teams.find(t => t.name === teamName);
                if (team && tierRank[team.tier] > tierRank[highestTier]) {
                    highestTier = team.tier;
                }
            });
            
            return highestTier;
        }
        
        // íŒ€ í•„í„° ë²„íŠ¼ ë™ì  ìƒì„±
        function generateTeamFilterButtons() {
            // ìˆœìœ„ë³„ë¡œ ì •ë ¬ëœ íŒ€ ëª©ë¡ ì‚¬ìš©
            const teamFilter = document.querySelector('.team-filter');
            teamFilter.innerHTML = ''; // ê¸°ì¡´ ë²„íŠ¼ ì´ˆê¸°í™”
            
            // íŒ€ ë²„íŠ¼ ì¶”ê°€ (ìˆœìœ„ ìˆœìœ¼ë¡œ)
            teamRankings.forEach((team, index) => {
                const button = document.createElement('button');
                button.className = 'team-filter-btn';
                button.setAttribute('data-team', team.name);
                
                // í‹°ì–´ ë°°ì§€ ìƒì„±
                const tierBadge = `<span class="tier tier-${team.tier} small-tier">${getTierText(team.tier)}</span>`;
                button.innerHTML = `${team.rank}. ${team.name} ${tierBadge}`;
                
                // ì²« ë²ˆì§¸ íŒ€ ë²„íŠ¼ì€ ê¸°ë³¸ ì„ íƒ
                if (index === 0) {
                    button.classList.add('active');
                }
                
                // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
                button.addEventListener('click', function() {
                    const team = this.getAttribute('data-team');
                    filterMatchesByTeam(team);
                    
                    // í™œì„±í™”ëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
                    document.querySelectorAll('.team-filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                });
                
                teamFilter.appendChild(button);
            });
        }
        
        // íŒ€ë³„ ê²½ê¸° í•„í„°ë§ í•¨ìˆ˜
        function filterMatchesByTeam(team) {
            const filteredMatches = formattedMatches.filter(match => {
                return match.originalTeamA === team || match.originalTeamB === team;
            });
            
            updateCourtMatches(filteredMatches, team);
            
            // íŒ€ ê´€ë ¨ ë©”ì‹œì§€ í‘œì‹œ
            const messageElement = document.getElementById('top-team-message');
            const teamInfo = teamRankings.find(t => t.name === team);
            
            if (teamInfo) {
                const winRate = teamInfo.games > 0 ? ((teamInfo.wins / teamInfo.games) * 100).toFixed(1) : '0.0';
                const tierBadge = `<span class="tier tier-${teamInfo.tier}">${getTierText(teamInfo.tier)}</span>`;
                
                messageElement.innerHTML = `
                    <div class="team-info-card">
                        <div class="team-info-header">
                            <span class="team-rank">${teamInfo.rank}ìœ„</span>
                            <strong style="font-size: 20px;">${team}</strong>
                            ${tierBadge}
                        </div>
                        <div class="team-info-stats">
                            <div class="team-stat-item">
                                <span class="team-stat-value">${teamInfo.games}</span>
                                <span class="team-stat-label">ê²½ê¸°ìˆ˜</span>
                            </div>
                            <div class="team-stat-item">
                                <span class="team-stat-value win">${teamInfo.wins}</span>
                                <span class="team-stat-label">ìŠ¹</span>
                            </div>
                            <div class="team-stat-item">
                                <span class="team-stat-value loss">${teamInfo.losses}</span>
                                <span class="team-stat-label">íŒ¨</span>
                            </div>
                            <div class="team-stat-item">
                                <span class="team-stat-value">${winRate}%</span>
                                <span class="team-stat-label">ìŠ¹ë¥ </span>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // ì½”íŠ¸ë³„ ê²½ê¸° í•„í„°ë§ í•¨ìˆ˜
        function filterMatchesByCourt(court) {
            const filteredMatches = formattedMatches.filter(match => match.court === court);
            updateCourtMatches(filteredMatches);
        }
        
        // 1ë“± íŒ€ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
        function updateTopTeamMessage(court) {
            const messageElement = document.getElementById('top-team-message');
            let topTeam = getTopTeam(court);
            
            if (court === 'ì¸ì²œí•™ìƒë¬¸í™”íšŒê´€') {
                messageElement.innerHTML = `${topTeam} ğŸ† <span class="highlight-text">ë¯¸ì³ ë‚ ë›°ê³  ìˆìŠµë‹ˆë‹¤!</span>`;
            } else {
                messageElement.innerHTML = `${topTeam} ğŸ† <span class="highlight-text">ì ë ¹ì¤‘ì…ë‹ˆë‹¤!</span>`;
            }
        }
        
        // íŠ¹ì • ì½”íŠ¸ì—ì„œ ê°€ì¥ ë§ì´ ì´ê¸´ íŒ€ êµ¬í•˜ê¸°
        function getTopTeam(court) {
            // ê´€ë ¨ ê²½ê¸° í•„í„°ë§
            const relevantMatches = formattedMatches.filter(match => match.court === court);
            
            // íŒ€ë³„ ìŠ¹ë¦¬ íšŸìˆ˜ ì§‘ê³„
            const teamWins = {};
            
            relevantMatches.forEach(match => {
                const isTeamAWin = match.scoreA > match.scoreB;
                
                if (isTeamAWin) {
                    teamWins[match.originalTeamA] = (teamWins[match.originalTeamA] || 0) + 1;
                } else {
                    teamWins[match.originalTeamB] = (teamWins[match.originalTeamB] || 0) + 1;
                }
            });
            
            // ìŠ¹ë¦¬ íšŸìˆ˜ê°€ ê°€ì¥ ë§ì€ íŒ€ ì°¾ê¸°
            let maxWins = 0;
            let topTeam = "ì•„ì§ ê²½ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤";
            
            for (const team in teamWins) {
                if (teamWins[team] > maxWins) {
                    maxWins = teamWins[team];
                    topTeam = team;
                }
            }
            
            return topTeam;
        }

        // í‹°ì–´ë³„ í‘œì‹œ í…ìŠ¤íŠ¸ ë°˜í™˜
        function getTierText(tier) {
            switch(tier) {
                case 'bronze': return 'ë¸Œë¡ ì¦ˆ';
                case 'silver': return 'ì‹¤ë²„';
                case 'gold': return 'ê³¨ë“œ';
                case 'platinum': return 'í”Œë˜í‹°ë„˜';
                case 'diamond': return 'ë‹¤ì´ì•„ëª¬ë“œ';
                default: return 'ì—†ìŒ';
            }
        }

        // ì„ ìˆ˜ ê¸°ë¡ ì—…ë°ì´íŠ¸
        function updatePlayerStats() {
            // ìŠ¹ë¥ ë¡œ ì •ë ¬ (ìŠ¹ë¥ ì´ ê°™ì„ ê²½ìš° ê²½ê¸°ìˆ˜ê°€ ë§ì€ ìˆœ)
            const sortedPlayers = [...playerStats].sort((a, b) => {
                const winRateA = a.wins / a.games || 0;
                const winRateB = b.wins / b.games || 0;
                
                if (winRateB === winRateA) {
                    return b.games - a.games;
                }
                return winRateB - winRateA;
            });
            
            const tableBody = document.getElementById('player-stats-body');
            tableBody.innerHTML = '';
            
            // ìµœëŒ€ playerDisplayCount ëª…ê¹Œì§€ë§Œ í‘œì‹œ
            const playersToShow = sortedPlayers.slice(0, playerDisplayCount);
            
            playersToShow.forEach((player, index) => {
                const row = document.createElement('tr');
                
                // ìµœê·¼ ì „ì  ë§ˆí¬ ìƒì„±
                const recentResults = player.recent.map(result => {
                    return `<span class="${result === 'ìŠ¹' ? 'win-mark' : 'loss-mark'}">${result}</span>`;
                }).join('');
                
                // í‹°ì–´ ë°°ì§€ ìƒì„±
                const tierBadge = `<span class="tier tier-${player.highestTier}">${getTierText(player.highestTier)}</span>`;
                
                // ì†Œì†íŒ€ í‘œì‹œ - ì‰¼í‘œë¡œ êµ¬ë¶„
                const teamsDisplay = player.teams.join(', ');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${player.name}</td>
                    <td>${player.school}</td>
                    <td>${teamsDisplay}</td>
                    <td>${player.games}</td>
                    <td class="win">${player.wins}</td>
                    <td class="loss">${player.losses}</td>
                    <td class="recent">${recentResults}</td>
                    <td>${tierBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // ë”ë³´ê¸° ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€ ì„¤ì •
            const loadMoreBtn = document.getElementById('load-more-players');
            if (playerDisplayCount >= sortedPlayers.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }

        // ì½”íŠ¸ë³„ ê²½ê¸° ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateCourtMatches(matches = formattedMatches, selectedTeam = null) {
            // ìµœì‹  ê²½ê¸°ê°€ ìœ„ì— ì˜¤ë„ë¡ ì •ë ¬
            const sortedMatches = [...matches].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            const tableBody = document.getElementById('court-matches-body');
            tableBody.innerHTML = '';
            
            if (sortedMatches.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="5">í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” ê²½ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>';
                tableBody.appendChild(row);
                return;
            }
            
            sortedMatches.forEach(match => {
                const row = document.createElement('tr');
                
                // ì„ íƒí•œ íŒ€ì´ ì¡´ì¬í•˜ê³ , ê·¸ íŒ€ì´ BíŒ€ì¸ ê²½ìš° ìœ„ì¹˜ êµí™˜
                let displayTeamA = match.teamA;
                let displayTeamB = match.teamB;
                let displayScoreA = match.scoreA;
                let displayScoreB = match.scoreB;
                let isTeamAWin = match.scoreA > match.scoreB;
                
                if (selectedTeam && match.originalTeamB === selectedTeam) {
                    // íŒ€ ìœ„ì¹˜ êµí™˜
                    displayTeamA = match.teamB;
                    displayTeamB = match.teamA;
                    displayScoreA = match.scoreB;
                    displayScoreB = match.scoreA;
                    isTeamAWin = match.scoreB > match.scoreA; // ìŠ¹íŒ¨ íŒì •ë„ êµí™˜
                }
                
                // ìŠ¹íŒ¨ì— ë”°ë¥¸ ìŠ¤íƒ€ì¼ ì ìš©
                const teamAClass = isTeamAWin ? 'win-team' : 'loss-team';
                const teamBClass = isTeamAWin ? 'loss-team' : 'win-team';
                
                row.innerHTML = `
                    <td>${match.date}</td>
                    <td>${match.court}</td>
                    <td class="${teamAClass}">${displayTeamA}</td>
                    <td>${displayScoreA} : ${displayScoreB}</td>
                    <td class="${teamBClass}">${displayTeamB}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // ì„ ìˆ˜ ê¸°ë¡ í•„í„°ë§ í•¨ìˆ˜
        function filterPlayerStats(type) {
            // ìŠ¹ë¥ ë¡œ ì •ë ¬ (ìŠ¹ë¥ ì´ ê°™ì„ ê²½ìš° ê²½ê¸°ìˆ˜ê°€ ë§ì€ ìˆœ)
            let filteredPlayers = [...playerStats];
            
            if (type !== 'all') {
                filteredPlayers = playerStats.filter(player => {
                    const schoolName = player.school;
                    const lastChar = schoolName.charAt(schoolName.length - 1);
                    return type === 'middle' ? lastChar === 'ì¤‘' : lastChar === 'ê³ ';
                });
            }
            
            filteredPlayers.sort((a, b) => {
                const winRateA = a.wins / a.games || 0;
                const winRateB = b.wins / b.games || 0;
                
                if (winRateB === winRateA) {
                    return b.games - a.games;
                }
                return winRateB - winRateA;
            });
            
            const tableBody = document.getElementById('player-stats-body');
            tableBody.innerHTML = '';
            
            // ìµœëŒ€ playerDisplayCount ëª…ê¹Œì§€ë§Œ í‘œì‹œ
            const playersToShow = filteredPlayers.slice(0, playerDisplayCount);
            
            playersToShow.forEach((player, index) => {
                const row = document.createElement('tr');
                
                // ìµœê·¼ ì „ì  ë§ˆí¬ ìƒì„±
                const recentResults = player.recent.map(result => {
                    return `<span class="${result === 'ìŠ¹' ? 'win-mark' : 'loss-mark'}">${result}</span>`;
                }).join('');
                
                // í‹°ì–´ ë°°ì§€ ìƒì„±
                const tierBadge = `<span class="tier tier-${player.highestTier}">${getTierText(player.highestTier)}</span>`;
                
                // ì†Œì†íŒ€ í‘œì‹œ - ì‰¼í‘œë¡œ êµ¬ë¶„
                const teamsDisplay = player.teams.join(', ');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${player.name}</td>
                    <td>${player.school}</td>
                    <td>${teamsDisplay}</td>
                    <td>${player.games}</td>
                    <td class="win">${player.wins}</td>
                    <td class="loss">${player.losses}</td>
                    <td class="recent">${recentResults}</td>
                    <td>${tierBadge}</td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // ë”ë³´ê¸° ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€ ì„¤ì •
            const loadMoreBtn = document.getElementById('load-more-players');
            if (playerDisplayCount >= filteredPlayers.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }
    </script>
</body>
</html>
